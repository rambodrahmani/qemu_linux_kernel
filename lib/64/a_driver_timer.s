#*******************************************************************************
# File: a_driver_timer.s
#       Interrupt primitive 40.
#
# Author: Rambod Rahmani <rambodrahmani@autistici.org>
#         Created on 07/07/2019.
#*******************************************************************************

#-------------------------------------------------------------------------------
#include "../libqlk.s"
#-------------------------------------------------------------------------------
.TEXT
#-------------------------------------------------------------------------------
.EXTERN c_driver_timer
#-------------------------------------------------------------------------------
.GLOBAL a_driver_timer
#-------------------------------------------------------------------------------
a_driver_timer:
    salva_registri

    call  c_driver_timer
    movq  $0xFEE000B0, %rax
    movl  $0, (%rax)
    
    carica_registri
    
    iretq
#*******************************************************************************

