#*******************************************************************************
# File: a_bm_ide.s
#
# Author: Rambod Rahmani <rambodrahmani@autistici.org>
#         Created on 17/08/2019.
#*******************************************************************************

#-------------------------------------------------------------------------------
#include "../../lib/libqlk.s"
#-------------------------------------------------------------------------------
.DATA
.BALIGN 4
.GLOBAL prd
    prd:  .FILL   16384, 4

.BALIGN 4
.GLOBAL vv
    vv:   .FILL   65536, 1
#-------------------------------------------------------------------------------
.TEXT
#-------------------------------------------------------------------------------
.EXTERN c_bm_ide
#-------------------------------------------------------------------------------
.GLOBAL a_bm_ide
#-------------------------------------------------------------------------------
a_bm_ide:
    save_registers              # save general purpose registers content
    call  c_bm_ide              # call c driver implementation
    restore_registers           # restore general purpose registers content
    
    iretq                       # return from interrupt
#*******************************************************************************

